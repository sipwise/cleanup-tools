{
  "comments": [
    {
      "key": {
        "uuid": "5ac4a560_b550e05f",
        "filename": "lib/NGCP/Cleanup.pm",
        "patchSetId": 1
      },
      "lineNbr": 325,
      "author": {
        "id": 1000013
      },
      "writtenOn": "2017-12-12T14:31:10Z",
      "side": 1,
      "message": "obsolete",
      "range": {
        "startLine": 325,
        "startChar": 15,
        "endLine": 325,
        "endChar": 28
      },
      "revId": "03efc555b3803b3c7a46cca0957ab82610928388",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ac4a560_75ed688b",
        "filename": "lib/NGCP/Cleanup.pm",
        "patchSetId": 1
      },
      "lineNbr": 331,
      "author": {
        "id": 1000013
      },
      "writtenOn": "2017-12-12T14:31:10Z",
      "side": 1,
      "message": "shouldnt backup_months be considered here as well?",
      "revId": "03efc555b3803b3c7a46cca0957ab82610928388",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ac4a560_d5fb9c45",
        "filename": "lib/NGCP/Cleanup.pm",
        "patchSetId": 1
      },
      "lineNbr": 331,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2017-12-12T14:36:45Z",
      "side": 1,
      "message": "they are considered, in dt_min.",
      "parentUuid": "5ac4a560_75ed688b",
      "revId": "03efc555b3803b3c7a46cca0957ab82610928388",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ac4a560_15c7d413",
        "filename": "lib/NGCP/Cleanup.pm",
        "patchSetId": 1
      },
      "lineNbr": 359,
      "author": {
        "id": 1000013
      },
      "writtenOn": "2017-12-12T14:31:10Z",
      "side": 1,
      "message": "why not using $all_parts here?",
      "revId": "03efc555b3803b3c7a46cca0957ab82610928388",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ac4a560_159514e4",
        "filename": "lib/NGCP/Cleanup.pm",
        "patchSetId": 1
      },
      "lineNbr": 359,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2017-12-12T14:36:45Z",
      "side": 1,
      "message": "because of how it is implemented :)\nthis function is tested and works reliably and very fast with various values (backup_month, retro,etc.) in the config.",
      "parentUuid": "5ac4a560_15c7d413",
      "revId": "03efc555b3803b3c7a46cca0957ab82610928388",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ac4a560_3565b045",
        "filename": "lib/NGCP/Cleanup.pm",
        "patchSetId": 1
      },
      "lineNbr": 487,
      "author": {
        "id": 1000013
      },
      "writtenOn": "2017-12-12T14:31:10Z",
      "side": 1,
      "message": "ignore",
      "revId": "03efc555b3803b3c7a46cca0957ab82610928388",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ac4a560_359a1015",
        "filename": "lib/NGCP/Cleanup.pm",
        "patchSetId": 1
      },
      "lineNbr": 487,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2017-12-12T14:36:45Z",
      "side": 1,
      "message": "to silently cover possible data duplication errors? no.",
      "parentUuid": "5ac4a560_3565b045",
      "revId": "03efc555b3803b3c7a46cca0957ab82610928388",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ac4a560_75a48857",
        "filename": "lib/NGCP/Cleanup.pm",
        "patchSetId": 1
      },
      "lineNbr": 487,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2017-12-12T14:38:29Z",
      "side": 1,
      "message": "e.g. what if for some mysql replication error+data rerating reason there are 2 cdrs with the same primary key but with some different data in other fields ?....",
      "parentUuid": "5ac4a560_359a1015",
      "revId": "03efc555b3803b3c7a46cca0957ab82610928388",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ac4a560_f5a6d852",
        "filename": "lib/NGCP/Cleanup.pm",
        "patchSetId": 1
      },
      "lineNbr": 487,
      "author": {
        "id": 1000013
      },
      "writtenOn": "2017-12-12T14:53:33Z",
      "side": 1,
      "message": "its still safe regarding any duplication issues. i remember darkly to add that this in order to support ctrl-c interruption if run manually",
      "parentUuid": "5ac4a560_75a48857",
      "revId": "03efc555b3803b3c7a46cca0957ab82610928388",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ac4a560_755f2873",
        "filename": "lib/NGCP/Cleanup.pm",
        "patchSetId": 1
      },
      "lineNbr": 502,
      "author": {
        "id": 1000013
      },
      "writtenOn": "2017-12-12T14:31:10Z",
      "side": 1,
      "message": "the wait state should also be but in here, and in the delete loop",
      "revId": "03efc555b3803b3c7a46cca0957ab82610928388",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ac4a560_55b6ac8b",
        "filename": "lib/NGCP/Cleanup.pm",
        "patchSetId": 1
      },
      "lineNbr": 502,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2017-12-12T14:47:52Z",
      "side": 1,
      "message": "this is the delete loop!\nadding wait state here can be considered but I would avoid it and here is why:\n- there are no linear determination of the speed of execution of the insert/delete statements to how fast they can be replicated, e.g. this statements are executed really fast but replication is struggling because of the overall I/O load caused by calls,etc.\n- on the other hand adding wait states based on the reading of the current replication state might be a solution\n- adding even 0.5 seconds sleep interval will cause 10000 iterations to take a minimum of around 1.5 hours to be completed, and not necessarily solving the issue with replication, unless of course the wait state is either based on the current replication state delay.\n- there are other mechanisms now to ease off replication and avoid delays in MariaDB, e.g. \"parallel replication\" that should solve the issue.\n\nP.S. this is kinda of scope for this review for sure but definitely something to consider and implement as a separate task.",
      "parentUuid": "5ac4a560_755f2873",
      "revId": "03efc555b3803b3c7a46cca0957ab82610928388",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    }
  ]
}